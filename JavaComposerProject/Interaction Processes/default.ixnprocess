<?xml version="1.0" encoding="UTF-8"?>
<xmi:XMI xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:datatypes="http://studio.genesyslab.com/common/datatypes/" xmlns:ipd="http://studio.genesyslab.com/ipd/" xmlns:notation="http://www.eclipse.org/gmf/runtime/1.0.2/notation" xsi:schemaLocation="http://studio.genesyslab.com/common/datatypes/ http://studio.genesyslab.com/common/#//datatypes">
  <ipd:IpdDiagram xmi:id="_xE6TQPr8Ed600N2F7x2Dtw" name="default" designedUsing="Composer 8.1.300.33">
    <blocks xmi:type="ipd:WorkflowBlock" xmi:id="_CtK-8AtaEd-dHN2RgOcklw" name="WelcomeCaller" terminating="true" category="Workflow" resource="Workflows/default.workflow"/>
    <blocks xmi:type="ipd:IpdLinkedBlock" xmi:id="_hWrt8JzGEeCznsLH9Rk7Ow" name="Acknowledge" starting="true" terminating="true" category="Create Email" type="CreateEmail" referrers="_CtK-8AtaEd-dHN2RgOcklw"/>
    <links xmi:type="ipd:IpdReadOnlyLink" xmi:id="_xUr90JJ1EeCisYFg-GEvjA" fromBlock="_CtK-8AtaEd-dHN2RgOcklw"/>
    <links xmi:type="ipd:IpdReadOnlyLink" xmi:id="_hW-o4JzGEeCznsLH9Rk7Ow" fromBlock="_CtK-8AtaEd-dHN2RgOcklw" toBlock="_hWrt8JzGEeCznsLH9Rk7Ow"/>
    <namespaces xmi:type="datatypes:Property" xmi:id="_32BAYMkrEeK4yJe2OLp92w" name="ws" value="http://www.genesyslab.com/modules/ws"/>
    <namespaces xmi:type="datatypes:Property" xmi:id="_32BAYckrEeK4yJe2OLp92w" name="queue" value="http://www.genesyslab.com/modules/queue"/>
    <namespaces xmi:type="datatypes:Property" xmi:id="_32BAYskrEeK4yJe2OLp92w" name="dialog" value="http://www.genesyslab.com/modules/dialog"/>
    <namespaces xmi:type="datatypes:Property" xmi:id="_32BAY8krEeK4yJe2OLp92w" name="session" value="http://www.genesyslab.com/modules/session"/>
    <namespaces xmi:type="datatypes:Property" xmi:id="_32BAZMkrEeK4yJe2OLp92w" name="ixn" value="http://www.genesyslab.com/modules/interaction"/>
    <namespaces xmi:type="datatypes:Property" xmi:id="_32BAZckrEeK4yJe2OLp92w" name="classification" value="http://www.genesyslab.com/modules/classification"/>
    <events xmi:type="datatypes:TransitionCommonItem" xmi:id="_rho28MkmEeK4yJe2OLp92w" name="interaction added" event="interaction.added" condition="typeof system.SessionID == 'undefined'" body="&lt;log expr=&quot;'interaction.added received in IPD event handler for interaction ' + _event.data.interactionid&quot;/>&#xA;&lt;assign location=&quot;system.SessionID&quot; expr=&quot;_sessionid&quot;/>&#xA;&lt;assign location=&quot;system.StartEvent&quot; expr=&quot;_event&quot;/>&#xA;&lt;assign location=&quot;App_StartEvent&quot; expr=&quot;_event&quot;/>&#xA;&lt;if cond=&quot;typeof _genesys.ixn.interactions[_event.data.interactionid] != 'undefined'&#xA;&#x9;&#x9;&#x9;&amp;amp;&amp;amp; typeof _genesys.ixn.interactions[_event.data.interactionid].voice != 'undefined'&#xA;&#x9;&#x9;&#x9;&amp;amp;&amp;amp; _genesys.ixn.interactions[_event.data.interactionid].voice.type == 'consult'&quot;>&#xA;&#x9;&lt;!-- Consult call started strategy. Attaching primary call...-->&#xA;&#x9;&lt;log expr=&quot;'attaching parent interaction'&quot;/>&#xA;&#x9;&lt;ixn:attach requestid=&quot;system.RequestID&quot; interactionid=&quot;_genesys.ixn.interactions[_event.data.interactionid].parentid&quot;/>&#xA;&lt;else/>&#xA;&#x9;&lt;!-- Normal call started strategy. Proceeding with session ...-->&#xA;&#x9;&lt;log expr=&quot;'processing interaction ' + _event.data.interactionid&quot;/>&#xA;&#x9;&lt;raise event=&quot;application.start&quot;>&#xA;&#x9;&#x9;&lt;param name=&quot;interactionid&quot; expr=&quot;_event.data.interactionid&quot;/>&#xA;&#x9;&lt;/raise>&#xA;&lt;/if>" target="false"/>
    <events xmi:type="datatypes:TransitionCommonItem" xmi:id="_rho28ckmEeK4yJe2OLp92w" name="interaction attached" event="interaction.attach.done" condition="_event.data.requestid == system.RequestID" body="&lt;!-- Processing primary call ...-->&#xA;&lt;log expr=&quot;'processing primary interaction ' + _event.data.interactionid&quot;/>&#xA;&lt;send event=&quot;'application.start'&quot; delay=&quot;'1s'&quot;>&#xA;&#x9;&lt;param name=&quot;interactionid&quot; expr=&quot;_event.data.interactionid&quot;/>&#xA;&lt;/send>" target="false"/>
    <events xmi:type="datatypes:TransitionCommonItem" xmi:id="_rho28skmEeK4yJe2OLp92w" name="interaction merged" event="interaction.onmerge" condition="system.Type == 'consult' &amp;amp;&amp;amp; _event.data.frominteractionid == _data.system.context.InteractionID &amp;amp;&amp;amp; _event.data.tointeractionid == _data.system.context.ParentInteractionID" body="&lt;log expr=&quot;'interaction.onmerge received in IPD event handler from ' + _event.data.frominteractionid + ' to ' + _event.data.tointeractionid&quot;/>&#xA;&lt;assign location=&quot;_data.system.context.InteractionID&quot; expr=&quot;_data.system.context.ParentInteractionID&quot;/>&#xA;&lt;assign location=&quot;_data.system.context.ParentInteractionID&quot; expr=&quot;undefined&quot;/>" target="false"/>
    <events xmi:type="datatypes:TransitionCommonItem" xmi:id="_rho288kmEeK4yJe2OLp92w" name="interaction deleted" event="interaction.deleted" condition="_event.data.interactionid == _data.system.context.InteractionID" body="&lt;if cond=&quot;!isEventHandledByApplication()&quot;>&#xA;&#x9;&lt;log expr=&quot;'interaction.deleted (effective interaction) received in IPD event handler for interaction ' + _event.data.interactionid&quot;/>&#xA;&#x9;&lt;raise event=&quot;application.exit&quot;>&#xA;&#x9;&#x9;&lt;param name=&quot;interactionid&quot; expr=&quot;_event.data.interactionid&quot;/>&#xA;&#x9;&lt;/raise>&#xA;&lt;/if>" target="false"/>
    <events xmi:type="datatypes:TransitionCommonItem" xmi:id="_rho29MkmEeK4yJe2OLp92w" name="parent interaction deleted" event="interaction.deleted" condition="system.Type == 'consult' &amp;amp;&amp;amp; _event.data.interactionid == _data.system.context.ParentInteractionID" body="&lt;if cond=&quot;!isEventHandledByApplication()&quot;>&#xA;&#x9;&lt;log expr=&quot;'interaction.deleted (parent interaction) received in IPD event handler for interaction ' + _event.data.interactionid&quot;/>&#xA;&#x9;&lt;raise event=&quot;application.exit&quot;>&#xA;&#x9;&#x9;&lt;param name=&quot;interactionid&quot; expr=&quot;_event.data.interactionid&quot;/>&#xA;&#x9;&lt;/raise>&#xA;&lt;/if>" target="false"/>
    <events xmi:type="datatypes:TransitionCommonItem" xmi:id="_rho29ckmEeK4yJe2OLp92w" name="interaction party state changed" event="interaction.partystatechanged" condition="_event.data.interactionid == _data.system.context.InteractionID" body="&lt;log expr=&quot;'interaction.partystatechanged received in IPD event handler for interaction ' + _event.data.interactionid&quot;/>&#xA;&lt;assign location=&quot;_data.system.context.ThisDN&quot; expr=&quot;_event.data.focusdeviceid&quot;/>" target="false"/>
    <events xmi:type="datatypes:TransitionCommonItem" xmi:id="_rho29skmEeK4yJe2OLp92w" name="catch all errors" event="error" condition="" body="&lt;if cond=&quot;!isEventHandledByApplication()&quot;>&#xA;&#x9;&lt;log expr=&quot;'unexpected error received in IPD event handler ' + _event.toSource()&quot;/>&#xA;&#x9;&lt;if cond=&quot;typeof _event != 'undefined' &amp;amp;&amp;amp; typeof _event.data != 'undefined' &amp;amp;&amp;amp; typeof _event.data.description != 'undefined'&quot;>&#xA;&#x9;&#x9;&lt;log expr=&quot;'Error message: ' + _event.data.description&quot; />&#xA;&#x9;&lt;/if>&#xA;&#x9;&lt;script>&#xA;&#x9;&#x9;&lt;![CDATA[&#xA;&#x9;&#x9;var autostop = (typeof _data.system.context.InteractionID != 'undefined')&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&amp;&amp; (typeof _genesys.ixn.interactions[_data.system.context.InteractionID] != 'undefined')&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&amp;&amp; (typeof _genesys.ixn.interactions[_data.system.context.InteractionID].voice == 'undefined')&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&amp;&amp; (_data.system.context.TerminateIxnOnExit == '1' || _data.system.context.TerminateIxnOnExit == 1);&#xA;&#x9;&#x9;]]>&#xA;&#x9;&lt;/script>&#xA;&#x9;&lt;if cond=&quot;autostop&quot;>&#xA;&#x9;&#x9;&lt;ixn:terminate interactionid=&quot;_data.system.context.InteractionID&quot; reason=&quot;'Auto-stop interaction'&quot;/>&#xA;&#x9;&lt;/if>&#xA;&#x9;&lt;raise event=&quot;application.exit&quot;>&#xA;&#x9;&#x9;&lt;param name=&quot;interactionid&quot; expr=&quot;_data.system.context.InteractionID&quot;/>&#xA;&#x9;&lt;/raise>&#xA;&lt;/if>" target="false"/>
  </ipd:IpdDiagram>
  <notation:Diagram xmi:id="_xFEEQPr8Ed600N2F7x2Dtw" type="Ipd" element="_xE6TQPr8Ed600N2F7x2Dtw" name="default.ixnprocess" measurementUnit="Pixel">
    <children xmi:type="notation:Shape" xmi:id="_CvG4oAtaEd-dHN2RgOcklw" type="2006" element="_CtK-8AtaEd-dHN2RgOcklw">
      <children xmi:type="notation:DecorationNode" xmi:id="_CvG4ogtaEd-dHN2RgOcklw" type="5011"/>
      <children xmi:type="notation:DecorationNode" xmi:id="_CvG4owtaEd-dHN2RgOcklw" type="5012"/>
      <layoutConstraint xmi:type="notation:Bounds" xmi:id="_CvG4oQtaEd-dHN2RgOcklw" x="132" y="132"/>
    </children>
    <children xmi:type="notation:Shape" xmi:id="_hWrt8ZzGEeCznsLH9Rk7Ow" type="2008" element="_hWrt8JzGEeCznsLH9Rk7Ow">
      <children xmi:type="notation:DecorationNode" xmi:id="_hWrt85zGEeCznsLH9Rk7Ow" type="5015"/>
      <children xmi:type="notation:DecorationNode" xmi:id="_hWrt9JzGEeCznsLH9Rk7Ow" type="5016"/>
      <layoutConstraint xmi:type="notation:Bounds" xmi:id="_hWrt8pzGEeCznsLH9Rk7Ow" x="132" y="232"/>
    </children>
    <styles xmi:type="notation:DiagramStyle" xmi:id="_xFEEQfr8Ed600N2F7x2Dtw"/>
    <edges xmi:type="notation:Connector" xmi:id="_hXSK4JzGEeCznsLH9Rk7Ow" type="4002" element="_hW-o4JzGEeCznsLH9Rk7Ow" source="_CvG4oAtaEd-dHN2RgOcklw" target="_hWrt8ZzGEeCznsLH9Rk7Ow" routing="Rectilinear">
      <styles xmi:type="notation:FontStyle" xmi:id="_hXSK4ZzGEeCznsLH9Rk7Ow"/>
      <bendpoints xmi:type="notation:RelativeBendpoints" xmi:id="_hXSK4pzGEeCznsLH9Rk7Ow" points="[-30, -25, 157, 132]$[-187, -157, 0, 0]"/>
    </edges>
  </notation:Diagram>
</xmi:XMI>
